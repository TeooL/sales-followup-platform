# File Upload with Multipart/Form-Data

## Overview
The neuralseekService now supports uploading files using `multipart/form-data` to the `/explore/upload` endpoint.

## Implementation

### 1. Service Function (neuralseekService.js)
```javascript
export async function uploadTranscriptFile(file) {
  // Creates FormData with the file
  // POSTs to: {API_BASE_URL}/explore/upload
  // Uses multipart/form-data content type automatically
  // Returns: { success: true, data: response.data, fileId: ... }
}
```

### 2. How to Use in Your App

#### Method 1: Basic Upload
```javascript
import * as transcriptService from './services/neuralseekService';

// In your component
const handleFileUpload = async (file) => {
  try {
    const result = await transcriptService.uploadTranscriptFile(file);
    console.log('Upload successful:', result);
    // Use result.fileId for further processing
  } catch (error) {
    console.error('Upload failed:', error.message);
  }
};
```

#### Method 2: With FileUpload Component
```javascript
import FileUpload from './components/FileUpload';

// Enable direct file upload mode
<FileUpload 
  onFileUpload={handleFileUpload}
  useDirectUpload={true}
/>

// In handler
const handleFileUpload = async (fileOrContent, type) => {
  if (type === 'file') {
    // fileOrContent is a File object
    const result = await transcriptService.uploadTranscriptFile(fileOrContent);
  } else {
    // fileOrContent is text content (legacy behavior)
    // Process as before
  }
};
```

### 3. What the Function Does

**Request:**
```
POST /explore/upload
Content-Type: multipart/form-data

Multipart Body:
- file: <binary file content>
- agent: "Main"
```

**Headers Automatically Set:**
- `apikey: {API_KEY}` - From your .env configuration
- `Content-Type: multipart/form-data; boundary=...` - Automatically generated by axios

### 4. Configuration (.env)
```env
REACT_APP_NEURALSEEK_API_URL=https://staging.neuralseek.com/stony14/maistro
REACT_APP_NEURALSEEK_API_KEY=aa8f4fb4-b120a2f8-0e35605e-b0e5cdb2
```

## Complete Integration Example

```javascript
// In App.js
import { useState } from 'react';
import * as transcriptService from './services/neuralseekService';
import FileUpload from './components/FileUpload';

function App() {
  const [uploading, setUploading] = useState(false);
  const [fileId, setFileId] = useState(null);

  const handleFileUpload = async (fileOrContent, type) => {
    if (type === 'file') {
      setUploading(true);
      try {
        const result = await transcriptService.uploadTranscriptFile(fileOrContent);
        setFileId(result.fileId);
        console.log('File uploaded successfully:', result);
      } catch (error) {
        console.error('Upload error:', error);
      } finally {
        setUploading(false);
      }
    }
  };

  return (
    <div>
      <FileUpload 
        onFileUpload={handleFileUpload}
        useDirectUpload={true}
      />
      {uploading && <p>Uploading...</p>}
      {fileId && <p>File ID: {fileId}</p>}
    </div>
  );
}
```

## Supported File Types
- Text: `.txt`
- Audio: `.mp3`, `.wav`, `.m4a`, `.ogg`
- Video: `.mp4`, `.webm`
- Any other file type

## API Response
The `/explore/upload` endpoint should return something like:
```json
{
  "fileId": "file_12345",
  "fileName": "transcript.txt",
  "uploadedAt": "2025-11-08T12:00:00Z",
  "status": "uploaded"
}
```

## Error Handling
```javascript
try {
  const result = await transcriptService.uploadTranscriptFile(file);
} catch (error) {
  // Error message will be: "Failed to upload file: [detailed error]"
  console.error(error.message);
  // Check browser console for full error details including API response
}
```

## Key Features
✓ Automatic multipart/form-data encoding
✓ API key passed as header
✓ Extended timeout (60s) for large files
✓ Comprehensive error logging
✓ FileId extraction from response
✓ Backward compatible with existing text-based uploads
